specVersion: 0.1.0
description: Demo WASM substreams

protoFiles:
  - ./proto/erc20.proto
  - ./proto/codec_eth.proto

modules:
  - name: block_to_hello_world # name of the module which will be specified in the cli
    kind: map # this is a map (stateless execution)
    code:
      type: wasm/rust-v1 # we are running rust code embedded in wasm
      file: ./demo/target/wasm32-unknown-unknown/release/substreams_template.wasm # path to our wasm binary
      entrypoint: map_hello_world # method which holds the same name and will be executed
    inputs:
      - source: sf.ethereum.type.v1.Block
    output:
      type: proto:pb.eth.TransactionTrace # returned value by the map

  - name: erc_20_transfer
    kind: map
    code:
      type: wasm/rust-v1 # we are running rust code embedded in wasm
      file: ./demo/target/wasm32-unknown-unknown/release/substreams_template.wasm
      entrypoint: map_erc_20_transfer
    output:
      type: proto:eth.erc20.v1.Transfers
